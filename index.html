<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>NGL UI — Login & Tools</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        
        /* ---------- BODY / BACKDROP ---------- */
        body {
            background: linear-gradient(135deg, #1a237e 0%, #283593 50%, #3949ab 100%);
            color: #ffffff;
            min-height: 100vh;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 10px;
            position: relative;
            overflow-x: hidden;
            margin: 0;
            transition: background 0.5s ease;
        }
        
        body.green-theme {
            background: linear-gradient(135deg, #1b5e20 0%, #2e7d32 50%, #388e3c 100%);
        }
        
        body.blue-theme {
            background: linear-gradient(135deg, #0d47a1 0%, #1565c0 50%, #1976d2 100%);
        }
        
        /* Animated Background Elements */
        .bg-bubbles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .bg-bubbles li {
            position: absolute;
            list-style: none;
            display: block;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            bottom: -160px;
            border-radius: 50%;
            animation: rise 15s infinite ease-in;
        }
        
        .bg-bubbles li:nth-child(1) {
            left: 10%;
            width: 20px;
            height: 20px;
            animation-duration: 12s;
        }
        
        .bg-bubbles li:nth-child(2) {
            left: 20%;
            width: 30px;
            height: 30px;
            animation-duration: 15s;
            animation-delay: 1s;
        }
        
        .bg-bubbles li:nth-child(3) {
            left: 35%;
            width: 15px;
            height: 15px;
            animation-duration: 10s;
            animation-delay: 2s;
        }
        
        .bg-bubbles li:nth-child(4) {
            left: 50%;
            width: 25px;
            height: 25px;
            animation-duration: 18s;
            animation-delay: 0s;
        }
        
        .bg-bubbles li:nth-child(5) {
            left: 65%;
            width: 35px;
            height: 35px;
            animation-duration: 14s;
            animation-delay: 1.5s;
        }
        
        .bg-bubbles li:nth-child(6) {
            left: 80%;
            width: 20px;
            height: 20px;
            animation-duration: 11s;
            animation-delay: 3s;
        }
        
        .bg-bubbles li:nth-child(7) {
            left: 90%;
            width: 30px;
            height: 30px;
            animation-duration: 16s;
            animation-delay: 2s;
        }
        
        @keyframes rise {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.2;
            }
            90% {
                opacity: 0.2;
            }
            100% {
                transform: translateY(-1000px) rotate(720deg);
                opacity: 0;
            }
        }
        
        /* ---------- LOGIN OVERLAY ---------- */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(180deg, rgba(4, 9, 27, 0.85), rgba(10, 20, 40, 0.9));
            z-index: 9999;
            padding: 20px;
            transition: opacity 400ms ease, visibility 400ms;
        }
        
        .login-card {
            width: 100%;
            max-width: 420px;
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.6), 0 0 100px rgba(63, 81, 181, 0.2);
            text-align: center;
            color: #e8eaf6;
            transform-origin: center;
            animation: popIn 500ms cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        
        .login-card::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(45deg);
            z-index: -1;
        }
        
        @keyframes popIn { 
            from { 
                transform: translateY(-20px) scale(0.95); 
                opacity: 0 
            } 
            to { 
                transform: translateY(0) scale(1); 
                opacity: 1 
            } 
        }
        
        .login-header {
            margin-bottom: 25px;
        }
        
        .login-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            background: linear-gradient(90deg, #ffffff, #c5cae9);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .login-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #688469, #66bb6a);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3);
        }
        
        .login-sub {
            color: #bfc8f3;
            font-size: 15px;
            margin-bottom: 8px;
        }
        
        .login-field {
            margin-bottom: 20px;
            text-align: left;
            position: relative;
        }
        
        .login-field label {
            display: flex;
            align-items: center;
            font-size: 14px;
            margin-bottom: 10px;
            color: #dfe6ff;
            font-weight: 600;
            gap: 8px;
        }
        
        .login-field input {
            width: 100%;
            padding: 16px 18px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
            background: rgba(20,30,70,0.6);
            color: #fff;
            font-size: 15px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .login-field input:focus {
            outline: none;
            border-color: rgba(76, 175, 80, 0.5);
            background: rgba(20,30,70,0.8);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
        }
        
        .login-field i {
            position: absolute;
            right: 15px;
            top: 42px;
            color: rgba(255,255,255,0.3);
        }
        
        .login-actions {
            margin-top: 25px;
        }
        
        .btn {
            width: 100%;
            padding: 16px 20px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            border: none;
            font-size: 16px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.2);
            transform: translateX(-100%);
            transition: transform 0.5s ease;
        }
        
        .btn:hover::before {
            transform: translateX(0);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            color: #fff;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.5);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .login-feedback {
            margin-top: 20px;
            min-height: 24px;
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        /* success / error styles */
        .feedback-success { 
            color: #dcedc8; 
            animation: glowSuccess 800ms ease; 
        }
        
        @keyframes glowSuccess { 
            0% { text-shadow: none } 
            50% { text-shadow: 0 6px 18px rgba(76,175,80,0.4) } 
            100% { text-shadow: none } 
        }
        
        .feedback-error { 
            color: #ffcdd2; 
        }
        
        /* shake */
        .shake { 
            animation: shakeAnim 420ms cubic-bezier(.36,.07,.19,.97); 
        }
        
        @keyframes shakeAnim {
            0% { transform: translateX(0) }
            20% { transform: translateX(-10px) }
            40% { transform: translateX(10px) }
            60% { transform: translateX(-8px) }
            80% { transform: translateX(8px) }
            100% { transform: translateX(0) }
        }
        
        /* hide overlay when not needed */
        .login-hidden { 
            visibility: hidden; 
            opacity: 0; 
            pointer-events: none; 
        }
        
        .demo-credentials {
            margin-top: 20px;
            font-size: 13px;
            color: #9fa8da;
            background: rgba(0,0,0,0.2);
            padding: 10px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        
        .demo-credentials code {
            background: rgba(255,255,255,0.1);
            padding: 3px 8px;
            border-radius: 4px;
            font-family: monospace;
            font-weight: 600;
        }
        
        /* Loading spinner */
        .spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* ---------- MAIN APP CONTAINER ---------- */
        .app-container {
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            gap: 20px;
            padding: 10px;
            animation: fadeIn 0.8s ease-out;
            overflow-x: auto;
            padding-top: 60px; /* Space for top controls */
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tools-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            width: 100%;
            max-width: 1200px;
        }
        
        .container {
            background-color: rgba(40, 53, 147, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4), 0 5px 15px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 500px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 8px;
            font-size: 24px;
            font-weight: 700;
            color: #ffffff;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .icon {
            width: 30px;
            height: 30px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .subtitle {
            text-align: center;
            margin-bottom: 20px;
            font-size: 14px;
            color: #c5cae9;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .form-group {
            margin-bottom: 15px;
            position: relative;
        }
        
        label {
            display: flex;
            align-items: center;
            margin-bottom: 6px;
            font-weight: 600;
            color: #e8eaf6;
            font-size: 14px;
            gap: 8px;
        }
        
        .label-icon {
            width: 18px;
            height: 18px;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px 15px;
            border: none;
            border-radius: 8px;
            background-color: rgba(57, 73, 171, 0.7);
            color: #ffffff;
            font-size: 14px;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            background-color: rgba(63, 81, 181, 0.8);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
        }
        
        input::placeholder, textarea::placeholder {
            color: #9fa8da;
        }
        
        .settings-row {
            display: flex;
            gap: 10px;
        }
        
        .settings-row .form-group {
            flex: 1;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        button {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-weight: 700;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
        }
        
        button::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.5s;
        }
        
        button:hover::before {
            left: 100%;
        }
        
        #startBtn {
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }
        
        #startBtn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.5);
        }
        
        #stopBtn {
            background: linear-gradient(135deg, #f44336, #ef5350);
            color: white;
            box-shadow: 0 4px 15px rgba(244, 67, 54, 0.4);
        }
        
        #stopBtn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(244, 67, 54, 0.5);
        }
        
        button:disabled {
            background: linear-gradient(135deg, #5c6bc0, #7986cb);
            cursor: not-allowed;
            opacity: 0.7;
            box-shadow: none;
        }
        
        .preview-section {
            background-color: rgba(40, 53, 147, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4), 0 5px 15px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 500px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeIn 0.8s ease-out 0.2s both;
            flex-shrink: 0;
        }
        
        .preview-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #e8eaf6;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .preview-area {
            background-color: rgba(57, 73, 171, 0.7);
            border-radius: 10px;
            min-height: 120px;
            padding: 15px;
            color: #c5cae9;
            font-size: 14px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            border: 1px dashed rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .preview-area.active {
            background-color: rgba(63, 81, 181, 0.8);
            border-color: rgba(76, 175, 80, 0.5);
            box-shadow: 0 0 15px rgba(76, 175, 80, 0.3);
        }
        
        .message-info {
            margin-bottom: 12px;
            width: 100%;
        }
        
        .message-info-row {
            display: flex;
            align-items: center;
            margin-bottom: 6px;
            gap: 8px;
        }
        
        .message-info-label {
            font-weight: 600;
            color: #e8eaf6;
            min-width: 60px;
            text-align: left;
            font-size: 13px;
        }
        
        .message-info-value {
            color: #c5cae9;
            text-align: left;
            flex: 1;
            font-size: 13px;
        }
        
        .traffic-container {
            width: 100%;
            margin-top: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 12px;
        }
        
        .traffic-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #e8eaf6;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .traffic-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .traffic-stat {
            text-align: center;
        }
        
        .traffic-stat-value {
            font-size: 16px;
            font-weight: 700;
            color: #ffffff;
        }
        
        .traffic-stat-label {
            font-size: 11px;
            color: #9fa8da;
        }
        
        .traffic-chart {
            width: 100%;
            height: 60px;
            background-color: rgba(63, 81, 181, 0.5);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }
        
        .traffic-bar {
            position: absolute;
            bottom: 0;
            width: 4px;
            background: linear-gradient(to top, #4caf50, #81c784);
            border-radius: 2px 2px 0 0;
            transition: height 0.3s ease;
        }
        
        .status-bar {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            padding: 12px;
            background-color: rgba(57, 73, 171, 0.7);
            border-radius: 10px;
            font-size: 13px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .status-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .status-label {
            color: #9fa8da;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 11px;
        }
        
        .status-value {
            font-weight: 700;
            color: #ffffff;
            font-size: 16px;
        }
        
        #results {
            margin-top: 15px;
            max-height: 150px;
            overflow-y: auto;
            padding: 8px;
            border-radius: 10px;
            background-color: rgba(57, 73, 171, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        #results::-webkit-scrollbar {
            width: 6px;
        }
        
        #results::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }
        
        #results::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
        }
        
        .message {
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 8px;
            background-color: rgba(63, 81, 181, 0.8);
            border-left: 4px solid #5c6bc0;
            color: #e8eaf6;
            font-size: 13px;
            animation: slideIn 0.3s ease-out;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .success {
            border-left-color: #4caf50;
            background-color: rgba(46, 125, 50, 0.8);
        }
        
        .error {
            border-left-color: #f44336;
            background-color: rgba(198, 40, 40, 0.8);
        }
        
        .counter {
            font-size: 12px;
            color: #9fa8da;
            margin-top: 8px;
            text-align: center;
            padding: 6px;
            background-color: rgba(63, 81, 181, 0.5);
            border-radius: 6px;
        }
        
        .floating-icons {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: -1;
        }
        
        .floating-icon {
            position: absolute;
            width: 24px;
            height: 24px;
            opacity: 0.1;
            animation: float 20s infinite linear;
        }
        
        @keyframes float {
            from { transform: translateY(100vh) rotate(0deg); }
            to { transform: translateY(-100px) rotate(360deg); }
        }
        
        .message-icon {
            width: 16px;
            height: 16px;
        }
        
        .button-icon {
            width: 18px;
            height: 18px;
        }
        
        /* Tool Description Styles */
        .tool-description {
            margin-top: 12px;
            padding: 12px;
            background-color: rgba(57, 73, 171, 0.7);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #c5cae9;
            font-size: 13px;
            line-height: 1.4;
        }
        
        .tool-description h3 {
            font-size: 15px;
            color: #e8eaf6;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tool-description p {
            margin-bottom: 6px;
        }
        
        .tool-description ul {
            padding-left: 18px;
            margin-bottom: 6px;
        }
        
        .tool-description li {
            margin-bottom: 4px;
            font-size: 13px;
        }
        
        .tool-description .warning {
            color: #ffccbc;
            font-style: italic;
            margin-top: 8px;
            padding-top: 6px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 12px;
        }
        
        /* Stats Panel Styles */
        .stats-panel {
            margin-top: 15px;
            padding: 12px;
            background-color: rgba(57, 73, 171, 0.7);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .stats-panel h3 {
            color: #e8eaf6;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 15px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }
        
        .stat-item {
            text-align: center;
            padding: 8px;
            background-color: rgba(63, 81, 181, 0.5);
            border-radius: 8px;
        }
        
        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: white;
        }
        
        .stat-label {
            font-size: 11px;
            color: #c5cae9;
            margin-top: 3px;
        }
        
        /* History & Export Buttons */
        .history-controls {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }
        
        .history-controls button {
            flex: 1;
            padding: 10px;
            border-radius: 8px;
            font-size: 13px;
        }
        
        #clearHistoryBtn {
            background: linear-gradient(135deg, #ff9800, #ffb74d);
            color: white;
        }
        
        #exportLogBtn {
            background: linear-gradient(135deg, #2196f3, #64b5f6);
            color: white;
        }
        
        /* Settings & Help Buttons */
        .top-controls {
            position: fixed;
            top: 10px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 15px;
            z-index: 100;
        }
        
        .top-controls button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255,255,255,0.15);
            border: none;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            backdrop-filter: blur(5px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        
        .top-controls button:hover {
            background: rgba(255,255,255,0.25);
            transform: scale(1.05);
        }
        
        .top-controls button:active {
            transform: scale(0.95);
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            overflow-y: auto;
        }
        
        .modal.show {
            display: flex;
        }
        
        .modal-content {
            background: rgba(30,40,80,0.95);
            padding: 20px;
            border-radius: 15px;
            width: 95%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            backdrop-filter: blur(10px);
        }
        
        .modal-content h2, .modal-content h3 {
            color: white;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .modal-content p, .modal-content li {
            color: #c5cae9;
            line-height: 1.5;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .modal-content ol, .modal-content ul {
            padding-left: 18px;
            margin-bottom: 12px;
        }
        
        .modal-close {
            margin-top: 15px;
            padding: 10px 20px;
            background: #4caf50;
            color: white;
            border: none;
            border-radius: 5px;
            width: 100%;
            cursor: pointer;
            font-weight: 600;
        }
        
        .modal-form .form-group {
            margin-bottom: 15px;
        }
        
        .modal-form label {
            display: block;
            margin-bottom: 6px;
            color: #e8eaf6;
            font-weight: 600;
            font-size: 14px;
        }
        
        .modal-form input, .modal-form select {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            background: rgba(57, 73, 171, 0.7);
            color: white;
            border: 1px solid rgba(255,255,255,0.1);
            font-size: 14px;
        }
        
        .modal-form input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
        }
        
        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .modal-buttons button {
            flex: 1;
            padding: 10px;
            border-radius: 8px;
            border: none;
            color: white;
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
        }
        
        /* Mobile Menu */
        .mobile-menu-btn {
            display: none;
            position: fixed;
            bottom: 15px;
            right: 15px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            color: white;
            border: none;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            font-size: 22px;
        }
        
        .mobile-menu {
            position: fixed;
            bottom: 80px;
            right: 15px;
            background: rgba(40, 53, 147, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 12px;
            display: none;
            flex-direction: column;
            gap: 8px;
            z-index: 999;
            min-width: 140px;
        }
        
        .mobile-menu.show {
            display: flex;
        }
        
        .mobile-menu button {
            padding: 10px;
            border-radius: 8px;
            background: rgba(57, 73, 171, 0.7);
            color: white;
            border: none;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 13px;
        }
        
        .mobile-menu button i {
            width: 18px;
            text-align: center;
        }
        
        /* Character Counter */
        .char-counter {
            font-size: 11px;
            color: #9fa8da;
            text-align: right;
            margin-top: 3px;
        }
        
        /* Warning Box */
        .warning-box {
            margin-top: 15px;
            padding: 12px;
            background: rgba(244, 67, 54, 0.2);
            border-radius: 8px;
            border-left: 4px solid #f44336;
            color: #ffccbc;
            font-size: 13px;
        }
        
        /* Keyboard Shortcuts Info */
        .shortcuts-info {
            margin-top: 12px;
            padding: 12px;
            background: rgba(57, 73, 171, 0.7);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .shortcuts-info h4 {
            color: #e8eaf6;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }
        
        .shortcuts-info ul {
            list-style: none;
            padding: 0;
        }
        
        .shortcuts-info li {
            margin-bottom: 6px;
            display: flex;
            justify-content: space-between;
            font-size: 13px;
        }
        
        .shortcut-key {
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
            font-weight: 600;
            font-size: 12px;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 8px;
            }
            
            .mobile-menu-btn {
                display: flex;
            }
            
            .login-card {
                padding: 25px;
                max-width: 90%;
            }
            
            .login-title {
                font-size: 24px;
            }
            
            .login-icon {
                width: 36px;
                height: 36px;
            }
            
            .login-sub {
                font-size: 14px;
                margin-bottom: 5px;
            }
            
            .login-field input {
                padding: 14px 16px;
            }
            
            .login-field i {
                top: 40px;
            }
            
            .btn {
                padding: 14px 16px;
                font-size: 15px;
            }
            
            .app-container {
                padding: 8px;
                padding-top: 60px; /* Space for top controls */
            }
            
            .tools-wrapper {
                flex-direction: column;
                max-width: 100%;
            }
            
            .container, .preview-section {
                width: 100%;
                max-width: 500px;
            }
            
            .modal-content {
                width: 95%;
                padding: 15px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 5px;
            }
            
            .login-card {
                padding: 20px 15px;
                max-width: 95%;
            }
            
            .login-title {
                font-size: 22px;
                margin-bottom: 8px;
            }
            
            .login-icon {
                width: 32px;
                height: 32px;
            }
            
            .login-sub {
                font-size: 13px;
                margin-bottom: 5px;
            }
            
            .login-field {
                margin-bottom: 15px;
            }
            
            .login-field label {
                font-size: 13px;
                margin-bottom: 6px;
            }
            
            .login-field input {
                padding: 12px 14px;
                font-size: 14px;
            }
            
            .login-field i {
                top: 38px;
            }
            
            .btn {
                padding: 12px 14px;
                font-size: 14px;
            }
            
            .demo-credentials {
                font-size: 12px;
                padding: 8px;
                flex-direction: column;
                gap: 5px;
            }
            
            .app-container {
                padding: 5px;
                padding-top: 60px; /* Space for top controls */
            }
            
            .container { 
                padding: 15px; 
            }
            
            .preview-section {
                padding: 15px;
            }
            
            h1 {
                font-size: 22px;
            }
            
            .settings-row {
                flex-direction: column;
                gap: 0;
            }
            
            .settings-row .form-group {
                margin-bottom: 12px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .top-controls {
                top: 5px;
                padding: 0 10px;
            }
            
            .top-controls button {
                width: 36px;
                height: 36px;
                font-size: 14px;
            }
        }
        
        @media (max-height: 600px) {
            .login-card {
                padding: 20px;
                max-width: 380px;
            }
            
            .login-title {
                font-size: 22px;
                margin-bottom: 6px;
            }
            
            .login-icon {
                width: 30px;
                height: 30px;
            }
            
            .login-sub {
                font-size: 13px;
                margin-bottom: 4px;
            }
            
            .login-field {
                margin-bottom: 12px;
            }
            
            .login-field input {
                padding: 10px 14px;
            }
            
            .login-field i {
                top: 36px;
            }
            
            .btn {
                padding: 10px 14px;
                font-size: 14px;
            }
            
            .demo-credentials {
                margin-top: 12px;
                font-size: 12px;
                padding: 6px;
            }
            
            .app-container {
                gap: 10px;
                padding-top: 55px; /* Space for top controls */
            }
            
            .container {
                padding: 15px;
            }
            
            .preview-section {
                padding: 15px;
            }
            
            .top-controls {
                top: 5px;
                padding: 0 10px;
            }
            
            .top-controls button {
                width: 32px;
                height: 32px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <ul class="bg-bubbles">
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
    
    <!-- Top Controls -->
    <div class="top-controls">
        <button id="helpBtn" title="Help">
            <i class="fas fa-question"></i>
        </button>
        <button id="settingsBtn" title="Settings">
            <i class="fas fa-cog"></i>
        </button>
    </div>
    
    <!-- LOGIN OVERLAY (muncul duluan) -->
    <div id="loginOverlay" class="login-overlay">
        <div id="loginCard" class="login-card" role="dialog" aria-modal="true" aria-label="Login NGL Demo">
            <div class="login-header">
                <div class="login-title">
                    <div class="login-icon">
                        <i class="fa-light fa-rocket-launch"></i>
                    </div>
                    NGL Tools
                </div>
                <div class="login-sub">Masuk untuk mengakses tools keren ini ✨</div>
            </div>
            
            <div class="login-field">
                <label for="loginUsername">
                    <i class="fas fa-user"></i> Username
                </label>
                <input id="loginUsername" type="text" placeholder="Masukkan username..." autocomplete="username" />
                <i class="fas fa-check-circle" style="display: none;"></i>
            </div>
            
            <div class="login-field">
                <label for="loginPassword">
                    <i class="fas fa-lock"></i> Password
                </label>
                <input id="loginPassword" type="password" placeholder="Masukkan password..." autocomplete="current-password" />
                <i class="fas fa-check-circle" style="display: none;"></i>
            </div>
            
            <div class="login-actions">
                <button id="btnLogin" class="btn btn-primary">
                    <i class="fas fa-sign-in-alt"></i> Masuk
                </button>
            </div>
            
            <div id="loginFeedback" class="login-feedback" aria-live="polite"></div>
            
            <div class="demo-credentials">
                <i class="fas fa-info-circle"></i> 
                <span>Hanya untuk edukasi , vvip hubungi tele admin</span>
            </div>
        </div>
    </div>

    <!-- MAIN APP CONTAINER (tersembunyi sampai login sukses) -->
    <div id="appContainer" class="app-container">
        <div class="floating-icons" id="floatingIcons"></div>
        
        <div class="tools-wrapper">
            <div class="container">
                <h1>
                    <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 12L8 9L12 13L17 8L20 11L12 19L5 12Z" fill="white"/>
                        <path d="M12 2C6.48 2 2,6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22,17.52 22 12C22,6.48 17.52 2 12 2ZM12 20C7.58 20 4,16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20,7.58 20 12C20,16.42 16.42 20 12 20Z" fill="white"/>
                    </svg>
                    NGL UI
                    <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="white"/>
                    </svg>
                </h1>
                <p class="subtitle">
                    <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 2H4C2.9 2 2,2.9 2 4V22L6 18H20C21.1 18 22,17.1 22 16V4C22,2.9 21.1,2 20,2ZM20 16H6L4 18V4H20V16Z" fill="white"/>
                        <path d="M6 8H18V10H6V8Z" fill="white"/>
                        <path d="M6 12H16V14H6V12Z" fill="white"/>
                    </svg>
                    Simulasi pengiriman pesan NGL tanpa batas
                    <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.5 2C17.75 2 22,6.25 22,11.5C22 16.75 17.75 21 12.5 21C10.97 21 9.52 20.64 8.24 20L3 22L4.5 17.5C3.55 16.04 3 14.33 3 12.5C3 7.25 7.25 3 12.5 3V2Z" fill="white"/>
                        <path d="M12.5 5C8.91 5 6 7.91 6 11.5C6 12.84 6.43 14.08 7.17 15.09L6.5 17L8.5 16.33C9.48 16.99 10.65 17.39 11.91 17.48L12.5 17.5C16.09 17.5 19 14.59 19 11C19 7.41 16.09 4.5 12.5 4.5V5Z" fill="white"/>
                    </svg>
                </p>
                
                <div class="form-group">
                    <label for="nglLink">
                        <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M3.9 12C3.9 10.29 5.29 8.9 7 8.9H11V7H7C4.24 7 2 9.24 2 12C2 14.76 4.24 17 7 17H11V15.1H7C5.29 15.1 3.9 13.71 3.9 12ZM8 13H16V11H8V13ZM17 7H13V8.9H17C18.71 8.9 20.1 10.29 20.1 12C20.1 13.71 18.71 15.1 17 15.1H13V17H17C19.76 17 22 14.76 22 12C22 9.24 19.76 7 17 7Z" fill="white"/>
                        </svg>
                        NGL Link:
                    </label>
                    <input type="url" id="nglLink" placeholder="https://ngl.link/username" required>
                </div>
                
                <div class="form-group">
                    <label for="template">
                        <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 3H5C3.9 3 3,3.9 3 5V19C3,20.1 3.9,21 5 21H19C20.1 21 21,20.1 21 19V5C21,3.9 20.1,3 19,3ZM19 19H5V5H19V19Z" fill="white"/>
                            <path d="M7 10H9V16H7V10Z" fill="white"/>
                            <path d="M11 8H13V16H11V8Z" fill="white"/>
                            <path d="M15 13H17V16H15V13Z" fill="white"/>
                        </svg>
                        Template Pesan:
                    </label>
                    <select id="template">
                        <option value="">-- Pilih Template --</option>
                        <option value="Hai! Aku suka kontenmu!">Hai! Aku suka kontenmu!</option>
                        <option value="Kapan live lagi?">Kapan live lagi?</option>
                        <option value="Apa kabar? Semangat terus!">Apa kabar? Semangat terus!</option>
                        <option value="Kontenmu keren banget!">Kontenmu keren banget!</option>
                        <option value="Terus berkarya ya!">Terus berkarya ya!</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="message">
                        <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 2H4C2.9 2 2,2.9 2 4V22L6 18H20C21.1 18 22,17.1 22 16V4C22,2.9 21.1,2 20,2ZM20 16H6L4 18V4H20V16Z" fill="white"/>
                            <path d="M6 8H18V10H6V8Z" fill="white"/>
                            <path d="M6 12H16V14H6V12Z" fill="white"/>
                        </svg>
                        Message: <span id="charCount" style="font-size: 12px; color: #9fa8da;">0/300</span>
                    </label>
                    <textarea id="message" rows="3" placeholder="Ketik pesan Anda di sini..." maxlength="300" required></textarea>
                    <div class="char-counter">Maksimal 300 karakter</div>
                </div>
                
                <div class="settings-row">
                    <div class="form-group">
                        <label for="delay">
                            <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11.99 2C6.47 2 2,6.48 2 12C2 17.52 6.47 22 11.99 22C17.52 22 22,17.52 22 12C22,6.48 17.52 2 11.99 2ZM12 20C7.58 20 4,16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20,7.58 20 12C20,16.42 16.42 20 12 20Z" fill="white"/>
                                <path d="M12.5 7H11V13L16.25 16.15L17 14.92L12.5 12.25V7Z" fill="white"/>
                            </svg>
                            Delay (ms):
                        </label>
                        <input type="number" id="delay" value="1000" min="100" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="count">
                            <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19 3H5C3.9 3 3,3.9 3 5V19C3,20.1 3.9,21 5 21H19C20.1 21 21,20.1 21 19V5C21,3.9 20.1,3 19,3ZM19 19H5V5H19V19Z" fill="white"/>
                                <path d="M7 10H9V16H7V10Z" fill="white"/>
                                <path d="M11 8H13V16H11V8Z" fill="white"/>
                                <path d="M15 13H17V16H15V13Z" fill="white"/>
                            </svg>
                            Count:
                        </label>
                        <input type="number" id="count" value="20" min="1" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="mode">
                        <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 6H3C1.9 6 1,6.9 1 8V16C1,17.1 1.9,18 3 18H21C22.1 18 23,17.1 23 16V8C23,6.9 22.1,6 21,6ZM21 16H3V8H21V16Z" fill="white"/>
                            <path d="M4 10H6V14H4V10Z" fill="white"/>
                            <path d="M8 10H10V14H8V10Z" fill="white"/>
                            <path d="M12 10H14V14H12V10Z" fill="white"/>
                        </svg>
                        Mode:
                    </label>
                    <select id="mode">
                        <option value="simulation">Simulasi</option>
                        <option value="real">Real</option>
                    </select>
                </div>
                
                <div class="button-group">
                    <button id="startBtn">
                        <svg class="button-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 5V19L19 12L8 5Z" fill="white"/>
                        </svg>
                        START
                    </button>
                    <button id="stopBtn" disabled>
                        <svg class="button-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 6H18V18H6V6Z" fill="white"/>
                        </svg>
                        STOP
                    </button>
                </div>
                
                <div class="history-controls">
                    <button id="clearHistoryBtn">
                        <i class="fas fa-trash"></i> Clear History
                    </button>
                    <button id="exportLogBtn">
                        <i class="fas fa-download"></i> Export Log
                    </button>
                </div>
                
                <div id="results"></div>
                
                <!-- Keyboard Shortcuts Info -->
                <div class="shortcuts-info">
                    <h4>
                        <i class="fas fa-keyboard"></i> Keyboard Shortcuts
                    </h4>
                    <ul>
                        <li>
                            <span>Start</span>
                            <span class="shortcut-key">Ctrl/Cmd + Enter</span>
                        </li>
                        <li>
                            <span>Stop</span>
                            <span class="shortcut-key">Escape</span>
                        </li>
                        <li>
                            <span>Focus Link</span>
                            <span class="shortcut-key">Ctrl/Cmd + L</span>
                        </li>
                        <li>
                            <span>Focus Message</span>
                            <span class="shortcut-key">Ctrl/Cmd + M</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="preview-section">
                <h2 class="preview-title">
                    <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17ZM12 14C10.34 14 9 12.66 9 11C9 9.34 10.34 8 12 8C13.66 8 15 9.34 15 11C15 12.66 13.66 14 12 14Z" fill="white"/>
                    </svg>
                    Preview Pesan
                </h2>
                <div class="preview-area" id="previewArea">
                    <div class="message-info" id="messageInfo">
                        <div class="message-info-row">
                            <svg class="label-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z"/>
                            </svg>
                            <span class="message-info-label">Target:</span>
                            <span class="message-info-value" id="targetValue">-</span>
                        </div>
                        <div class="message-info-row">
                            <svg class="label-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                                <path d="M20 2H4C2.9 2 2,2.9 2 4V22L6 18H20C21.1 18 22,17.1 22 16V4C22,2.9 21.1,2 20,2ZM20 16H6L4 18V4H20V16Z"/>
                                <path d="M6 8H18V10H6V8Z"/>
                                <path d="M6 12H16V14H6V12Z"/>
                            </svg>
                            <span class="message-info-label">Pesan:</span>
                            <span class="message-info-value" id="messageValue">-</span>
                        </div>
                    </div>
                    
                    <div class="traffic-container" id="trafficContainer" style="display: none;">
                        <div class="traffic-title">
                            <svg class="label-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2C6.48 2 2,6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22,17.52 22 12C22,6.48 17.52 2 12 2ZM13 17H11V11H13V17ZM13 9H11V7H13V9Z"/>
                            </svg>
                            Trafik Sender
                        </div>
                        
                        <div class="traffic-stats">
                            <div class="traffic-stat">
                                <div class="traffic-stat-value" id="currentRate">0</div>
                                <div class="traffic-stat-label">Pesan/detik</div>
                            </div>
                            <div class="traffic-stat">
                                <div class="traffic-stat-value" id="peakRate">0</div>
                                <div class="traffic-stat-label">Puncak</div>
                            </div>
                            <div class="traffic-stat">
                                <div class="traffic-stat-value" id="avgRate">0</div>
                                <div class="traffic-stat-label">Rata-rata</div>
                            </div>
                        </div>
                        
                        <div class="traffic-chart" id="trafficChart"></div>
                    </div>
                </div>
                
                <!-- Tool Description -->
                <div class="tool-description">
                    <h3>
                        <i class="fas fa-info-circle"></i> Tentang Tools Ini
                    </h3>
                    <p>
                        <strong>NGL UI Tools</strong> adalah simulator pengiriman pesan anonim ke NGL (NGL.link) yang dirancang untuk tujuan edukasi dan pengujian.
                    </p>
                    <ul>
                        <li><strong>Simulasi Mode:</strong> Mensimulasikan pengiriman pesan tanpa benar-benar mengirim ke server NGL</li>
                        <li><strong>Real Mode:</strong> Mengirim pesan secara langsung ke server NGL dengan API resmi</li>
                        <li><strong>Delay Control:</strong> Mengatur jeda antar pengiriman pesan (dalam milidetik)</li>
                        <li><strong>Count Control:</strong> Menentukan jumlah maksimum pesan yang akan dikirim</li>
                        <li><strong>Real-time Monitoring:</strong> Memantau statistik pengiriman secara real-time</li>
                        <li><strong>Template Pesan:</strong> Menggunakan template pesan yang sudah disiapkan</li>
                        <li><strong>History & Export:</strong> Menyimpan riwayat aktivitas dan mengekspor log</li>
                    </ul>
                    <p>
                        Tools ini menggunakan teknologi web modern dengan antarmuka yang responsif dan ramah pengguna.
                    </p>
                    <div class="warning">
                        <i class="fas fa-exclamation-triangle"></i> <strong>Peringatan:</strong> Gunakan tools ini dengan bertanggung jawab. Penyalahgunaan dapat melanggar ketentuan layanan NGL.
                    </div>
                </div>
                
                <!-- Statistics Panel -->
                <div class="stats-panel">
                    <h3>
                        <i class="fas fa-chart-bar"></i> Statistik Penggunaan
                    </h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="totalSessions">0</div>
                            <div class="stat-label">Total Sesi</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="totalMessages">0</div>
                            <div class="stat-label">Total Pesan</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="successRate">0%</div>
                            <div class="stat-label">Success Rate</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="avgResponseTime">0ms</div>
                            <div class="stat-label">Avg Response</div>
                        </div>
                    </div>
                </div>
                
                <div class="status-bar">
                    <div class="status-item">
                        <span class="status-label">
                            <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19 3H5C3.9 3 3,3.9 3 5V19C3,20.1 3.9,21 5 21H19C20.1 21 21,20.1 21 19V5C21,3.9 20.1,3 19,3ZM19 19H5V5H19V19Z" fill="white"/>
                                <path d="M7 10H9V16H7V10Z" fill="white"/>
                                <path d="M11 8H13V16H11V8Z" fill="white"/>
                                <path d="M15 13H17V16H15V13Z" fill="white"/>
                            </svg>
                            Progress Sent
                        </span>
                        <span class="status-value" id="progressSent">0</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">
                            <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2L2 7V12C2 16.5 4.23 20.68 7.62 23.15L12 25L16.38 23.15C19.77 20.68 22 16.5 22 12V7L12 2ZM12 23L9 21.5C6.03 19.32 4 15.67 4 12V8.5L12 4.5L20 8.5V12C20 15.67 17.97 19.32 15 21.5L12 23Z"/>
                                <path d="M10 17L5 12L6.41 10.59L10 14.17L16.59 7.58L18 9L10 17Z"/>
                            </svg>
                            Status
                        </span>
                        <span class="status-value" id="actionStatus">Belum ada aksi</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Menu -->
    <button class="mobile-menu-btn" id="mobileMenuBtn">
        <i class="fas fa-bars"></i>
    </button>
    
    <div class="mobile-menu" id="mobileMenu">
        <button onclick="document.getElementById('startBtn').click()">
            <i class="fas fa-play"></i> Start
        </button>
        <button onclick="document.getElementById('stopBtn').click()">
            <i class="fas fa-stop"></i> Stop
        </button>
        <button onclick="document.getElementById('clearHistoryBtn').click()">
            <i class="fas fa-trash"></i> Clear
        </button>
        <button onclick="document.getElementById('settingsBtn').click()">
            <i class="fas fa-cog"></i> Settings
        </button>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <h2><i class="fas fa-cog"></i> Pengaturan</h2>
            
            <div class="modal-form">
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="autoSaveHistory" checked> Simpan history otomatis
                    </label>
                </div>
                
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="soundEffects" checked> Efek suara
                    </label>
                </div>
                
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="notifications" checked> Notifikasi browser
                    </label>
                </div>
                
                <div class="form-group">
                    <label>Theme:</label>
                    <select id="themeSelect">
                        <option value="dark">Dark (Default)</option>
                        <option value="blue">Blue</option>
                        <option value="green">Green</option>
                    </select>
                </div>
            </div>
            
            <div class="modal-buttons">
                <button id="saveSettings" style="background: #4caf50;">Save</button>
                <button id="closeSettings" style="background: #f44336;">Close</button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <h2><i class="fas fa-question-circle"></i> Panduan Penggunaan</h2>
            
            <div>
                <h3>1. Login</h3>
                <p>Masukkan username <code>ngl</code> dan password <code>12</code> untuk mengakses tools.</p>
                
                <h3>2. Mengirim Pesan</h3>
                <ol>
                    <li>Masukkan link NGL target (format: https://ngl.link/username)</li>
                    <li>Pilih template pesan atau ketik pesan sendiri (maksimal 300 karakter)</li>
                    <li>Atur delay (jeda waktu antar pesan dalam milidetik)</li>
                    <li>Atur count (jumlah pesan yang akan dikirim)</li>
                    <li>Pilih mode: Simulasi (hanya simulasi) atau Real (kirim nyata)</li>
                    <li>Klik tombol START untuk memulai</li>
                </ol>
                
                <h3>3. Keyboard Shortcuts</h3>
                <ul>
                    <li><strong>Ctrl/Cmd + Enter</strong>: Memulai pengiriman</li>
                    <li><strong>Escape</strong>: Menghentikan pengiriman</li>
                    <li><strong>Ctrl/Cmd + L</strong>: Fokus ke input link</li>
                    <li><strong>Ctrl/Cmd + M</strong>: Fokus ke input pesan</li>
                </ul>
                
                <h3>4. Fitur Lainnya</h3>
                <ul>
                    <li><strong>Template</strong>: Gunakan template pesan yang sudah disiapkan</li>
                    <li><strong>History</strong>: Semua aktivitas tersimpan dan dapat diekspor</li>
                    <li><strong>Statistics</strong>: Lihat statistik penggunaan tools</li>
                    <li><strong>Settings</strong>: Kustomisasi pengalaman penggunaan</li>
                    <li><strong>Mobile Menu</strong>: Akses cepat dari perangkat mobile</li>
                </ul>
            </div>
            
            <div class="warning-box">
                <strong>⚠️ Peringatan:</strong> Gunakan tools ini dengan bertanggung jawab. Penyalahgunaan dapat melanggar ketentuan layanan NGL.
            </div>
            
            <button class="modal-close" id="closeHelp">Tutup</button>
        </div>
    </div>

    <script>
        // ---------- GLOBAL VARIABLES ----------
        const correctUsername = 'ngl';
        const correctPassword = '12';
        const loginOverlay = document.getElementById('loginOverlay');
        const loginCard = document.getElementById('loginCard');
        const loginUsername = document.getElementById('loginUsername');
        const loginPassword = document.getElementById('loginPassword');
        const btnLogin = document.getElementById('btnLogin');
        const loginFeedback = document.getElementById('loginFeedback');
        const appContainer = document.getElementById('appContainer');
        
        // Settings
        let settings = {
            autoSaveHistory: true,
            soundEffects: true,
            notifications: true,
            theme: 'dark'
        };
        
        // History
        let messageHistory = [];
        
        // Main functionality
        let isRunning = false;
        let stopRequested = false;
        let counter = 0;
        let totalSent = 0;
        let lastRequestTime = 0;
        const MIN_DELAY = 500; // 500ms minimum
        
        // Traffic chart
        const maxBars = 50;
        let trafficData = [];
        let trafficBars = [];
        let trafficInterval;
        let peakRate = 0;
        let totalMessages = 0;
        let startTime;
        
        // ---------- INITIALIZATION ----------
        
        // Load settings and history on start
        window.addEventListener('DOMContentLoaded', function() {
            loadSettings();
            loadHistory();
            updateStatistics();
            
            // Show help on first visit
            if (!localStorage.getItem('helpShown')) {
                localStorage.setItem('helpShown', 'true');
                setTimeout(() => {
                    document.getElementById('helpModal').classList.add('show');
                }, 1000);
            }
        });
        
        // ---------- LOGIN LOGIC ----------
        
        // Input validation indicators
        loginUsername.addEventListener('input', validateUsername);
        loginPassword.addEventListener('input', validatePassword);
        
        function validateUsername() {
            const checkIcon = loginUsername.nextElementSibling;
            if (loginUsername.value.trim() === correctUsername) {
                checkIcon.style.display = 'block';
                checkIcon.style.color = '#4caf50';
            } else {
                checkIcon.style.display = 'none';
            }
        }
        
        function validatePassword() {
            const checkIcon = loginPassword.nextElementSibling;
            if (loginPassword.value.trim() === correctPassword) {
                checkIcon.style.display = 'block';
                checkIcon.style.color = '#4caf50';
            } else {
                checkIcon.style.display = 'none';
            }
        }
        
        // Small helper to show message
        function flashMessage(text, type) {
            loginFeedback.innerHTML = text;
            loginFeedback.classList.remove('feedback-success','feedback-error');
            if (type === 'success') {
                loginFeedback.classList.add('feedback-success');
            } else if (type === 'error') {
                loginFeedback.classList.add('feedback-error');
            }
        }
        
        // Login flow
        btnLogin.addEventListener('click', tryLogin);
        
        // Enter to submit
        [loginUsername, loginPassword].forEach(el => {
            el.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') tryLogin();
            });
        });
        
        function tryLogin() {
            // read values (trim)
            const user = loginUsername.value.trim();
            const pass = loginPassword.value.trim();
            
            // simple validation
            if (!user || !pass) {
                flashMessage('⚠️ Isi username dan password dulu', 'error');
                shakeCard();
                return;
            }
            
            // simulate small delay for UX
            btnLogin.disabled = true;
            btnLogin.innerHTML = '<span class="spinner"></span> Memeriksa...';
            flashMessage('Memeriksa kredensial ... ⏳', 'success');
            
            setTimeout(() => {
                if (user === correctUsername && pass === correctPassword) {
                    // success
                    flashMessage('✔️ Akses diterima — Selamat datang! 🎉', 'success');
                    animateSuccessThenEnter();
                } else {
                    // fail
                    flashMessage('❌ Akses ditolak — username atau password salah', 'error');
                    shakeCard();
                    btnLogin.disabled = false;
                    btnLogin.innerHTML = '<i class="fas fa-sign-in-alt"></i> Masuk';
                }
            }, 1200);
        }
        
        function shakeCard() {
            loginCard.classList.remove('shake');
            // trigger reflow to restart animation
            void loginCard.offsetWidth;
            loginCard.classList.add('shake');
        }
        
        function animateSuccessThenEnter() {
            // small celebration effect then hide overlay and show app
            loginCard.style.transform = 'scale(0.98)';
            setTimeout(() => {
                loginCard.style.transform = 'scale(.8) translateY(-20px)';
                loginCard.style.opacity = '0';
                
                setTimeout(() => {
                    loginOverlay.classList.add('login-hidden');
                    appContainer.style.display = 'flex';
                    
                    // Initialize floating icons for the main app
                    initializeFloatingIcons();
                    
                    // Initialize traffic chart
                    initTrafficChart();
                    
                    // Focus first input in the app for convenience
                    const firstInput = document.querySelector('#nglLink');
                    if (firstInput) firstInput.focus();
                    
                    // Play success sound
                    playSound('success');
                    
                    // Show notification
                    showNotification('Login Berhasil', 'Selamat datang di NGL Tools!');
                }, 380);
            }, 500);
        }
        
        // ensure focus on username initially
        loginUsername.focus();
        
        // ---------- MAIN APP FUNCTIONALITY ----------
        
        // Template selector
        document.getElementById('template').addEventListener('change', function() {
            const messageField = document.getElementById('message');
            if (this.value && !messageField.value) {
                messageField.value = this.value;
                messageField.dispatchEvent(new Event('input'));
            }
        });
        
        // Character counter
        document.getElementById('message').addEventListener('input', function() {
            const charCount = this.value.length;
            document.getElementById('charCount').textContent = `${charCount}/300`;
            
            // Update preview
            const message = this.value.trim();
            
            if (message) {
                document.getElementById('messageValue').textContent = message.length > 30 ? 
                    message.substring(0, 30) + '...' : message;
            } else {
                document.getElementById('messageValue').textContent = '-';
            }
        });
        
        // Floating icons background
        const icons = [
            '<svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M20 2H4C2.9 2 2,2.9 2 4V22L6 18H20C21.1 18 22,17.1 22 16V4C22,2.9 21.1,2 20,2ZM20 16H6L4 18V4H20V16Z"/><path d="M6 8H18V10H6V8Z"/><path d="M6 12H16V14H6V12Z"/></svg>',
            '<svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/></svg>',
            '<svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2,6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22,17.52 22 12C22,6.48 17.52 2 12 2ZM12 20C7.58 20 4,16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20,7.58 20 12C20,16.42 16.42 20 12 20Z"/><path d="M12.5 7H11V13L16.25 16.15L17 14.92L12.5 12.25V7Z"/></svg>',
            '<svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2,6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22,17.52 22 12C22,6.48 17.52 2 12 2ZM10 17L5 12L6.41 10.59L10 14.17L16.59 7.58L18 9L10 17Z"/></svg>',
            '<svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L2 7V12C2 16.5 4.23 20.68 7.62 23.15L12 25L16.38 23.15C19.77 20.68 22 16.5 22 12V7L12 2ZM12 23L9 21.5C6.03 19.32 4 15.67 4 12V8.5L12 4.5L20 8.5V12C20 15.67 17.97 19.32 15 21.5L12 23Z"/><path d="M10 17L5 12L6.41 10.59L10 14.17L16.59 7.58L18 9L10 17Z"/></svg>',
            '<svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M19 4H18V2H16V4H8V2H6V4H5C3.89 4 3.01 4.9 3.01 6L3 20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21,4.9 20.1,4 19,4ZM19 20H5V9H19V20Z"/></svg>',
            '<svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2,6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22,17.52 22 12C22,6.48 17.52 2 12 2ZM13 17H11V11H13V17ZM13 9H11V7H13V9Z"/></svg>',
            '<svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2,6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22,17.52 22 12C22,6.48 17.52 2 12 2ZM17 13H7V11H17V13Z"/></svg>',
            '<svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M9 16.2L4.8 12L3.4 13.4L9 19L21 7L19.6 5.6L9 16.2Z"/></svg>',
            '<svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2,6.48 2 12S6.48 22 12 22 22,17.52 22 17.52 2 12 2ZM10 17L5 12L6.41 10.59L10 14.17L16.59 7.58L18 9L10 17Z"/></svg>'
        ];
        
        function initializeFloatingIcons() {
            const floatingIconsContainer = document.getElementById('floatingIcons');
            
            function createFloatingIcon() {
                const icon = document.createElement('div');
                icon.className = 'floating-icon';
                icon.innerHTML = icons[Math.floor(Math.random() * icons.length)];
                icon.style.left = Math.random() * 100 + '%';
                icon.style.animationDuration = (Math.random() * 20 + 10) + 's';
                icon.style.animationDelay = Math.random() * 5 + 's';
                floatingIconsContainer.appendChild(icon);
                
                // Remove icon after animation completes
                setTimeout(() => {
                    icon.remove();
                }, 30000);
            }
            
            // Create initial floating icons
            for (let i = 0; i < 15; i++) {
                setTimeout(() => createFloatingIcon(), i * 300);
            }
            
            // Continue creating floating icons
            setInterval(createFloatingIcon, 2000);
        }
        
        // Traffic chart functionality
        function initTrafficChart() {
            const chart = document.getElementById('trafficChart');
            
            // Create initial bars
            for (let i = 0; i < maxBars; i++) {
                const bar = document.createElement('div');
                bar.className = 'traffic-bar';
                bar.style.left = `${i * (100 / maxBars)}%`;
                bar.style.height = '0%';
                chart.appendChild(bar);
                trafficBars.push(bar);
                trafficData.push(0);
            }
        }
        
        function updateTrafficChart() {
            if (!isRunning) return;
            
            // Shift data to the left
            trafficData.shift();
            trafficData.push(0);
            
            // Update bars
            for (let i = 0; i < maxBars; i++) {
                const height = Math.min(100, trafficData[i] * 20); // Scale for visibility
                trafficBars[i].style.height = `${height}%`;
            }
        }
        
        function recordMessageSent() {
            if (!isRunning) return;
            
            // Increment the current bar
            trafficData[trafficData.length - 1]++;
            
            // Calculate current rate (messages per second)
            const currentTime = Date.now();
            const elapsedSeconds = (currentTime - startTime) / 1000;
            const currentRate = elapsedSeconds > 0 ? Math.round(totalMessages / elapsedSeconds) : 0;
            
            // Update peak rate
            if (currentRate > peakRate) {
                peakRate = currentRate;
                document.getElementById('peakRate').textContent = peakRate;
            }
            
            // Update current rate
            document.getElementById('currentRate').textContent = currentRate;
            
            // Calculate and update average rate
            const avgRate = elapsedSeconds > 0 ? Math.round(totalMessages / elapsedSeconds) : 0;
            document.getElementById('avgRate').textContent = avgRate;
        }
        
        function startTrafficMonitoring() {
            // Reset data
            trafficData = new Array(maxBars).fill(0);
            peakRate = 0;
            totalMessages = 0;
            startTime = Date.now();
            
            // Reset UI
            document.getElementById('currentRate').textContent = '0';
            document.getElementById('peakRate').textContent = '0';
            document.getElementById('avgRate').textContent = '0';
            
            // Show traffic container
            document.getElementById('trafficContainer').style.display = 'block';
            
            // Start updating chart
            trafficInterval = setInterval(updateTrafficChart, 100);
        }
        
        function stopTrafficMonitoring() {
            if (trafficInterval) {
                clearInterval(trafficInterval);
                trafficInterval = null;
            }
        }
        
        // Validate NGL URL
        function validateNGLUrl(url) {
            try {
                const nglUrl = new URL(url);
                if (nglUrl.hostname !== 'ngl.link') {
                    throw new Error('Hanya link NGL.link yang valid');
                }
                const pathParts = nglUrl.pathname.split('/').filter(p => p);
                if (pathParts.length === 0) {
                    throw new Error('Link tidak mengandung username');
                }
                return pathParts[0]; // return username
            } catch (e) {
                throw new Error('Link NGL tidak valid');
            }
        }
        
        // Rate limiting
        async function makeRequest() {
            const now = Date.now();
            if (now - lastRequestTime < MIN_DELAY) {
                await new Promise(resolve => setTimeout(resolve, MIN_DELAY - (now - lastRequestTime)));
            }
            lastRequestTime = Date.now();
        }
        
        // Main functionality
        document.getElementById('startBtn').addEventListener('click', startSpamming);
        document.getElementById('stopBtn').addEventListener('click', stopSpamming);
        
        async function startSpamming() {
            const nglLink = document.getElementById('nglLink').value.trim();
            const message = document.getElementById('message').value.trim();
            const delay = parseInt(document.getElementById('delay').value);
            const count = parseInt(document.getElementById('count').value);
            const mode = document.getElementById('mode').value;
            
            if (!nglLink || !message || isNaN(delay) || delay < 100 || isNaN(count) || count < 1) {
                alert('⚠️ Mohon isi semua bidang dengan benar!\nMinimum delay: 100ms\nMinimum count: 1');
                return;
            }
            
            let username;
            try {
                username = validateNGLUrl(nglLink);
            } catch (e) {
                alert('❌ ' + e.message + '\nFormat yang benar: https://ngl.link/username');
                return;
            }
            
            // UI Setup
            isRunning = true;
            stopRequested = false;
            counter = 0;
            totalSent = 0;
            document.getElementById('startBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;
            document.getElementById('actionStatus').textContent = 'Mengirim pesan...';
            
            // Update message info
            document.getElementById('targetValue').textContent = username;
            document.getElementById('messageValue').textContent = message.length > 30 ? 
                message.substring(0, 30) + '...' : message;
            
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<div class="message"><svg class="message-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L2 7V12C2 16.5 4.23 20.68 7.62 23.15L12 25L16.38 23.15C19.77 20.68 22 16.5 22 12V7L12 2ZM12 23L9 21.5C6.03 19.32 4 15.67 4 12V8.5L12 4.5L20 8.5V12C20 15.67 17.97 19.32 15 21.5L12 23Z"/><path d="M10 17L5 12L6.41 10.59L10 14.17L16.59 7.58L18 9L10 17Z"/></svg> Memulai spam ke ' + username + '...</div>';
            
            const previewArea = document.getElementById('previewArea');
            previewArea.classList.add('active');
            
            // Start traffic monitoring
            startTrafficMonitoring();
            
            // Play start sound
            playSound('start');
            
            while (isRunning && !stopRequested && counter < count) {
                counter++;
                try {
                    const timestamp = new Date().toLocaleTimeString();
                    const requestStartTime = Date.now();
                    
                    // Create message element
                    const msgElement = document.createElement('div');
                    msgElement.className = 'message';
                    msgElement.innerHTML = `<svg class="message-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M11.99 2C6.47 2 2,6.48 2 12C2 17.52 6.47 22 11.99 22C17.52 22 22,17.52 22 12C22,6.48 17.52 2 11.99 2ZM12 20C7.58 20 4,16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20,7.58 20 12C20,16.42 16.42 20 12 20Z"/><path d="M12.5 7H11V13L16.25 16.15L17 14.92L12.5 12.25V7Z"/></svg> ${counter} - ${timestamp} - Mengirim...`;
                    resultsDiv.appendChild(msgElement);
                    
                    // Generate unique device ID
                    const deviceId = 'anon-' + Math.random().toString(36).substr(2, 9) + Date.now();
                    
                    // Apply rate limiting
                    await makeRequest();
                    
                    // Send request
                    if (mode === 'real') {
                        const response = await fetch('https://ngl.link/api/submit', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/x-www-form-urlencoded',
                            },
                            body: `username=${encodeURIComponent(username)}&question=${encodeURIComponent(message)}&deviceId=${deviceId}&gameSlug=&referrer=`
                        });
                        
                        const data = await response.json();
                        const responseTime = Date.now() - requestStartTime;
                        
                        if (response.ok && data.success) {
                            msgElement.classList.add('success');
                            msgElement.innerHTML = `<svg class="message-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M9 16.2L4.8 12L3.4 13.4L9 19L21 7L19.6 5.6L9 16.2Z"/></svg> ${counter} - ${timestamp} - Berhasil terkirim! (${responseTime}ms)`;
                            totalSent++;
                            totalMessages++;
                            recordMessageSent();
                            
                            // Save to history
                            if (settings.autoSaveHistory) {
                                saveToHistory(message, 'success', timestamp, responseTime);
                            }
                            
                            // Play success sound
                            playSound('success');
                        } else {
                            throw new Error(data.message || 'Gagal mengirim');
                        }
                    } else {
                        // Simulation mode
                        await new Promise(resolve => setTimeout(resolve, 500));
                        const responseTime = Math.floor(Math.random() * 200) + 100; // Simulate 100-300ms response time
                        
                        msgElement.classList.add('success');
                        msgElement.innerHTML = `<svg class="message-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M9 16.2L4.8 12L3.4 13.4L9 19L21 7L19.6 5.6L9 16.2Z"/></svg> ${counter} - ${timestamp} - Simulasi berhasil! (${responseTime}ms)`;
                        totalSent++;
                        totalMessages++;
                        recordMessageSent();
                        
                        // Save to history
                        if (settings.autoSaveHistory) {
                            saveToHistory(message, 'success', timestamp, responseTime);
                        }
                        
                        // Play success sound
                        playSound('success');
                    }
                } catch (error) {
                    const responseTime = Date.now() - requestStartTime;
                    const errorElement = document.querySelector('#results div:last-child');
                    errorElement.classList.add('error');
                    errorElement.innerHTML = `<svg class="message-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2,6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22,17.52 22 12C22,6.48 17.52 2 12 2ZM13 17H11V11H13V17ZM13 9H11V7H13V9Z"/></svg> ${counter} - Error: ${error.message || 'Kesalahan tidak diketahui'} (${responseTime}ms)`;
                    
                    // Save to history
                    if (settings.autoSaveHistory) {
                        saveToHistory(message, 'error', timestamp, responseTime, error.message);
                    }
                    
                    // Play error sound
                    playSound('error');
                }
                
                // Update progress
                document.getElementById('progressSent').textContent = totalSent;
                
                // Add counter
                const counterElement = document.createElement('div');
                counterElement.className = 'counter';
                counterElement.innerHTML = `<svg class="label-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M16 6L18.29 8.29L13.41 13.17L9.41 9.17L2 16.59L3.41 18L9.41 12L13.41 16L19.71 9.71L22 12V6H16Z"/></svg> Terkirim: ${totalSent} pesan dari ${counter} percobaan`;
                resultsDiv.appendChild(counterElement);
                
                // Scroll to bottom
                resultsDiv.scrollTop = resultsDiv.scrollHeight;
                
                // Update statistics
                updateStatistics();
                
                // Delay
                if (!stopRequested && counter < count) {
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
            
            // Final status
            const finalElement = document.createElement('div');
            finalElement.className = 'message';
            if (stopRequested) {
                finalElement.innerHTML = `<svg class="message-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M6 6H18V18H6V6Z"/></svg> DIHENTIKAN - Total: ${totalSent} pesan terkirim dari ${counter} percobaan`;
            } else {
                finalElement.innerHTML = `<svg class="message-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L2 7V12C2 16.5 4.23 20.68 7.62 23.15L12 25L16.38 23.15C19.77 20.68 22 16.5 22 12V7L12 2ZM12 23L9 21.5C6.03 19.32 4 15.67 4 12V8.5L12 4.5L20 8.5V12C20 15.67 17.97 19.32 15 21.5L12 23Z"/><path d="M10 17L5 12L6.41 10.59L10 14.17L16.59 7.58L18 9L10 17Z"/></svg> SELESAI - Total: ${totalSent} pesan terkirim dari ${counter} percobaan`;
            }
            resultsDiv.appendChild(finalElement);
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
            
            // Update status
            document.getElementById('actionStatus').textContent = stopRequested ? 'Dihentikan' : 'Selesai';
            
            // Reset UI
            isRunning = false;
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            
            // Stop traffic monitoring
            stopTrafficMonitoring();
            
            // Remove active class from preview area
            setTimeout(() => {
                previewArea.classList.remove('active');
            }, 2000);
            
            // Show completion notification
            if (settings.notifications) {
                showNotification(
                    'Proses Selesai', 
                    stopRequested ? 'Pengiriman dihentikan' : 'Semua pesan telah terkirim'
                );
            }
        }
        
        function stopSpamming() {
            if (isRunning) {
                stopRequested = true;
                document.getElementById('stopBtn').disabled = true;
                document.getElementById('actionStatus').textContent = 'Menghentikan...';
                const resultsDiv = document.getElementById('results');
                resultsDiv.innerHTML += '<div class="message"><svg class="message-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M6 6H18V18H6V6Z"/></svg> Menghentikan setelah ' + counter + ' percobaan...</div>';
                
                // Play stop sound
                playSound('stop');
            }
        }
        
        // ---------- HISTORY & EXPORT FUNCTIONS ----------
        
        function saveToHistory(message, status, timestamp, responseTime, errorMessage = '') {
            const historyItem = {
                message,
                status,
                timestamp,
                responseTime,
                errorMessage,
                id: Date.now()
            };
            
            messageHistory.unshift(historyItem); // Add to beginning of array
            
            // Keep only last 100 items
            if (messageHistory.length > 100) {
                messageHistory = messageHistory.slice(0, 100);
            }
            
            // Save to localStorage
            localStorage.setItem('nglHistory', JSON.stringify(messageHistory));
        }
        
        function loadHistory() {
            const saved = localStorage.getItem('nglHistory');
            if (saved) {
                try {
                    messageHistory = JSON.parse(saved);
                } catch (e) {
                    console.error('Error loading history:', e);
                    messageHistory = [];
                }
            }
        }
        
        // Clear history
        document.getElementById('clearHistoryBtn').addEventListener('click', function() {
            if (confirm('Apakah Anda yakin ingin menghapus semua history?')) {
                messageHistory = [];
                localStorage.removeItem('nglHistory');
                document.getElementById('results').innerHTML = '<div class="message"><svg class="message-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2,6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22,17.52 22 12C22,6.48 17.52 2 12 2ZM10 17L5 12L6.41 10.59L10 14.17L16.59 7.58L18 9L10 17Z"/></svg> History telah dihapus</div>';
                
                // Play clear sound
                playSound('clear');
            }
        });
        
        // Export log
        document.getElementById('exportLogBtn').addEventListener('click', function() {
            const dataStr = JSON.stringify(messageHistory, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `ngl-log-${new Date().toISOString().slice(0,10)}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            // Play export sound
            playSound('export');
        });
        
        // ---------- STATISTICS FUNCTIONS ----------
        
        function updateStatistics() {
            const stats = {
                totalSessions: parseInt(localStorage.getItem('totalSessions') || '0') + 1,
                totalMessages: messageHistory.length,
                successMessages: messageHistory.filter(m => m.status === 'success').length,
                totalResponseTime: messageHistory.reduce((sum, m) => sum + (m.responseTime || 0), 0)
            };
            
            localStorage.setItem('totalSessions', stats.totalSessions);
            
            document.getElementById('totalSessions').textContent = stats.totalSessions;
            document.getElementById('totalMessages').textContent = stats.totalMessages;
            document.getElementById('successRate').textContent = 
                stats.totalMessages > 0 ? Math.round((stats.successMessages / stats.totalMessages) * 100) + '%' : '0%';
            document.getElementById('avgResponseTime').textContent = 
                stats.totalMessages > 0 ? Math.round(stats.totalResponseTime / stats.totalMessages) + 'ms' : '0ms';
        }
        
        // ---------- SETTINGS FUNCTIONS ----------
        
        function loadSettings() {
            const saved = localStorage.getItem('nglSettings');
            if (saved) {
                try {
                    settings = { ...settings, ...JSON.parse(saved) };
                    
                    // Apply settings
                    document.getElementById('autoSaveHistory').checked = settings.autoSaveHistory;
                    document.getElementById('soundEffects').checked = settings.soundEffects;
                    document.getElementById('notifications').checked = settings.notifications;
                    document.getElementById('themeSelect').value = settings.theme;
                    
                    // Apply theme
                    applyTheme(settings.theme);
                } catch (e) {
                    console.error('Error loading settings:', e);
                }
            }
        }
        
        // Settings modal functionality
        document.getElementById('settingsBtn').addEventListener('click', function() {
            document.getElementById('settingsModal').classList.add('show');
        });
        
        document.getElementById('closeSettings').addEventListener('click', function() {
            document.getElementById('settingsModal').classList.remove('show');
        });
        
        document.getElementById('saveSettings').addEventListener('click', function() {
            settings = {
                autoSaveHistory: document.getElementById('autoSaveHistory').checked,
                soundEffects: document.getElementById('soundEffects').checked,
                notifications: document.getElementById('notifications').checked,
                theme: document.getElementById('themeSelect').value
            };
            
            localStorage.setItem('nglSettings', JSON.stringify(settings));
            document.getElementById('settingsModal').classList.remove('show');
            
            // Apply theme
            applyTheme(settings.theme);
            
            // Play save sound
            playSound('save');
        });
        
        function applyTheme(theme) {
            const body = document.body;
            body.className = ''; // Remove all theme classes
            
            switch(theme) {
                case 'blue':
                    body.classList.add('blue-theme');
                    break;
                case 'green':
                    body.classList.add('green-theme');
                    break;
                default:
                    // Dark theme is default, no class needed
                    break;
            }
        }
        
        // ---------- HELP FUNCTIONS ----------
        
        // Help modal functionality
        document.getElementById('helpBtn').addEventListener('click', function() {
            document.getElementById('helpModal').classList.add('show');
        });
        
        document.getElementById('closeHelp').addEventListener('click', function() {
            document.getElementById('helpModal').classList.remove('show');
        });
        
        // ---------- MOBILE MENU FUNCTIONS ----------
        
        // Mobile menu functionality
        document.getElementById('mobileMenuBtn').addEventListener('click', function() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('show');
        });
        
        // Close mobile menu when clicking outside
        document.addEventListener('click', function(e) {
            const menu = document.getElementById('mobileMenu');
            const menuBtn = document.getElementById('mobileMenuBtn');
            
            if (!menu.contains(e.target) && !menuBtn.contains(e.target)) {
                menu.classList.remove('show');
            }
        });
        
        // ---------- KEYBOARD SHORTCUTS ----------
        
        // Add keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + Enter untuk start
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter' && !isRunning) {
                document.getElementById('startBtn').click();
            }
            
            // Escape untuk stop
            if (e.key === 'Escape' && isRunning) {
                document.getElementById('stopBtn').click();
            }
            
            // Ctrl/Cmd + L untuk fokus ke link input
            if ((e.ctrlKey || e.metaKey) && e.key === 'l') {
                e.preventDefault();
                document.getElementById('nglLink').focus();
            }
            
            // Ctrl/Cmd + M untuk fokus ke message input
            if ((e.ctrlKey || e.metaKey) && e.key === 'm') {
                e.preventDefault();
                document.getElementById('message').focus();
            }
            
            // Ctrl/Cmd + S untuk settings
            if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                e.preventDefault();
                document.getElementById('settingsBtn').click();
            }
            
            // F1 untuk help
            if (e.key === 'F1') {
                e.preventDefault();
                document.getElementById('helpBtn').click();
            }
        });
        
        // ---------- SOUND EFFECTS FUNCTIONS ----------
        
        function playSound(type) {
            if (!settings.soundEffects) return;
            
            // Create audio context for better browser support
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            // Create oscillator for simple beep sounds
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            // Set different sounds based on type
            switch(type) {
                case 'success':
                    oscillator.frequency.value = 523.25; // C5 note
                    gainNode.gain.value = 0.3;
                    oscillator.type = 'sine';
                    break;
                case 'error':
                    oscillator.frequency.value = 220; // A3 note
                    gainNode.gain.value = 0.3;
                    oscillator.type = 'sawtooth';
                    break;
                case 'start':
                    oscillator.frequency.value = 440; // A4 note
                    gainNode.gain.value = 0.2;
                    oscillator.type = 'sine';
                    break;
                case 'stop':
                    oscillator.frequency.value = 330; // E4 note
                    gainNode.gain.value = 0.2;
                    oscillator.type = 'triangle';
                    break;
                case 'clear':
                    oscillator.frequency.value = 196; // G3 note
                    gainNode.gain.value = 0.2;
                    oscillator.type = 'square';
                    break;
                case 'export':
                    oscillator.frequency.value = 659.25; // E5 note
                    gainNode.gain.value = 0.2;
                    oscillator.type = 'sine';
                    break;
                case 'save':
                    oscillator.frequency.value = 783.99; // G5 note
                    gainNode.gain.value = 0.2;
                    oscillator.type = 'sine';
                    break;
                default:
                    return; // Don't play sound for unknown types
            }
            
            // Play the sound
            oscillator.start();
            
            // Stop the sound after a short duration
            setTimeout(() => {
                oscillator.stop();
            }, 200);
        }
        
        // ---------- NOTIFICATION FUNCTIONS ----------
        
        function showNotification(title, message) {
            if (!settings.notifications) return;
            
            if (!("Notification" in window)) {
                console.log("Browser doesn't support notifications");
                return;
            }
            
            if (Notification.permission === "granted") {
                createNotification(title, message);
            } else if (Notification.permission !== "denied") {
                Notification.requestPermission().then(function (permission) {
                    if (permission === "granted") {
                        createNotification(title, message);
                    }
                });
            }
        }
        
        function createNotification(title, message) {
            const notification = new Notification(title, {
                body: message,
                icon: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%234caf50"><path d="M12 2C6.48 2 2,6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>'
            });
            
            // Auto close after 5 seconds
            setTimeout(() => {
                notification.close();
            }, 5000);
            
            // Handle notification click
            notification.onclick = function() {
                window.focus();
                notification.close();
            };
        }
        
        // ---------- REQUEST NOTIFICATION PERMISSION ON LOAD ----------
        
        // Request notification permission on page load
        if ("Notification" in window && settings.notifications) {
            Notification.requestPermission().then(function (permission) {
                if (permission !== "granted") {
                    console.log("Notification permission denied");
                }
            });
        }
    </script>
</body>
</html>
